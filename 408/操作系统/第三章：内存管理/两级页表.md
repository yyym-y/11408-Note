# 两级页表

* 单级页表存在的问题
    * 单页表必须连续存放和占用多个页框，以及整个页表必须常驻内存, 如果页表很大，会占用连续的很多个页框，这与离散分配存储管理方式相悖
    * 没有必要让整个页表都常驻内存，因为进程在一段时间内可能只需要访问某几个特定的页面
* 两级页表的解决方案
    * 两级页表的解决方案包括将页表进行分组，每个内存块刚好可以放入一个分组
    * 为这些小页表建立上一级的**页目录表/外层页表/顶层页表**，记录小页表在内存中的块号和相对顺序
    * ![](./img/Snipaste_2025-06-04_14-58-45.png)
* 两级页表的寻址过程
    * 将逻辑地址拆分为一级页号、二级页号和业内偏移量
    * 查询页目录表，找到二级页表在内存中的块号
    * 根据二级页号查询二级页表，找到最终的目标内存块号和业内偏移量
    * 计算最终的物理地址，通过内存块的起始地址和业内偏移量得出
* 注意事项
    * 采用多级页表时，各级页表的大小不能超过一个页面
    * 采用两级页表结构时，访问一个逻辑地址需要进行三次访存：查询页目录表、查询二级页表、访问最终目标内存单元
    * 单级页表访问一个逻辑地址需两次访存，三级页表需四次访存，四级页表需五次访存，$$n$$ 级页表需 $$n+1$$ 次访存