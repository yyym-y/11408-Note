# IO软件层次结构

* IO软件的层次结构包括用户层、设备独立性软件、设备驱动程序和中断处理程序四层。(设备独立性软件、设备驱动程序和中断处理程序 属于操作系统内核功能)
* 最底层是IO硬件设备，由机械部分和电子部分组成

* 各层功能说明
    * **用户层软件(系统调用处理层)**
        * 用户层软件提供简单易用的交互接口和库函数，如C语言中的printf函数
        *  用户层软件将用户请求翻译成格式化的请求， 并通过“系统调用"请求操作系统内核的服务
    * **设备独立性软件**
        * 处理系统调用，提供统一调用接口，实现设备保护、差错处理、设备分配与回收、数据缓冲区管理和逻辑设备名到物理设备名映射, 根据设各类型选择调用相应的驱动程序
        * 操作系统设置一张设备管理表(LUT) 来管理设备名信息
            * 单独设置一张LUT，这就意味着所有用户不能使用相同的逻辑设备名
            * 每一个用户设置一张 LUT, 这样不同用户可以重名, 放在用户管理进程的 PCB 中
    * **设备驱动程序**
        * 与硬件直接交互，控制设备操作
        * 不同设备的内部硬件特性也不同，这些特性只有厂家才知道，因此厂家须提供与设备相对应的驱动程
    * **中断处理程序**
        * 当任务完成时，控制器会发送一个中断信号，系统会根据中断信号类型找到相应的中断处理程序并执行
        * 需要和硬件直接打交道(需要读取IO设备的状态寄存器)