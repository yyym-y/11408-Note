# 进程控制

* 进程控制
	* 进程控制的实现方式（原语）
		* 原语是操作系统内核中的特殊程序，具有原子性，即程序运行必须一气呵成，中间不可被中断
		* 原语的原子性通过关中断和开中断两个特权指令来实现。关中断指令执行后，CPU不再检查中断信号，直到开中断指令执行后恢复
		* 这两个指令只能是特权指令，只能由内核程序使用
	* 进程的相关原语
		* **进程创建原语**
			* 申请空白PCB、分配资源、初始化PCB内容、将PCB插入就绪队列
			* 创建原语将进程从创建态转换为就绪态，放入就绪队列
		* **撤销原语**
			* 找到PCB、剥夺CPU使用权、杀死子进程、回收资源、删除PCB
			* 用于终止进程，将进程从当前状态转换为终止态
			* 分为三种： 正常结束， 异常结束，外界干预
		* **阻塞原语和唤醒原语**
			* 阻塞原语： 找到PCB、保护现场、设置阻塞态、插入等待队列
			* 阻塞原语： 将进程从运行态转换为阻塞态
			* 唤醒原语 ： 找到PCB、移除等待队列、设置就绪态、插入就绪队列
			* 唤醒原语 ： 将进程从阻塞态转换为就绪态
			* 阻塞原语和唤醒原语必须是成对使用，一个进程因为何事被阻塞，就应该因何事被唤醒
		* **切换原语**
			* 保存下处理机进程的运行环境、挑选新进程上处理机、更新PCB内容、恢复新进程的运行环境
			* 切换原语用于在两个进程之间切换
			* 保存和恢复运行环境是切换原语的关键步骤，涉及CPU寄存器的操作