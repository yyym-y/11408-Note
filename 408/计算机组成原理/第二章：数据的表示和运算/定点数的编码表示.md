# 定点数的编码表示


在日常生活中，通常用正号、负号来分别表示正数和负数，如 $$+15$$、$$-8$$ 等。 这种带 $$+$$ 或 $$-$$ 符号的数称为**真值**。真值是机器数所代表的实际值

在计算机中，通常将数的符号和数值部分一起编码，将数据的符号数字化，通常用 $$0$$ 表 示 “正”，用 $$1$$ 表示“负”。这种把符弓“数字化"的数称为**机器数**

浮点数： 小数点的位置不固定（科学计数法）

定点数： 小数点的位置固定（日常使用的数字）


## 无符号数的表示

无符号整数的编码是所有整数编码中最简单的

我们可以定义一个向量 $$\vec{x} = [x_{w -1}, x_{w - 2}, \ldots, x_0] \quad x_i \in \{0, 1\}$$

这个向量就可以表示唯一的数 $$X = \sum\limits_{i = 0}^{w - 1} x_i 2^i$$

我们从数学角度不难证明出这是一个双射函数， 即一个数对应一个向量， 一个向量也对应着一个数

对于一个有 $$w$$ 位的无符号编码数， 他能表示的范围是 $$[0, \sum\limits_{i = 0}^{w - 1} 2^i]$$ 也可以写成 $$[0, 2^w - 1]$$


## 有符号数的表示

有符号数一般把小数点隐含在最后一位, 定点小数把小数点隐含在第一位后面

### 原码

用尾数表示真值的绝对值，符号位“0/1”对应“正/负”

最高位仅仅表示正负， 剩下的位数和无符号编码方式一致

$$X = x_{w - 1} \times (-1) + \sum\limits_{i = 1}^{w - 2} x_i 2^i$$

优点: 与真值的对应关系简单、直观，与真值的转换简单, 用原码实现乘除方便

缺点就是表示两次 $$0$$ : $$10$$ 和 $$00$$ 都表示 $$0$$, 同时使用原码进行加减法十分的困难

原码的表示范围是: $$[-(2^{n - 1} - 1), 2^{n - 1} - 1]$$


###  反码

若符号位为 $$0$$ ，则反码与原码相同, 若符号位为 $$1$$ ，则数值位全部取反

表示范围和原码的范围一样

### 补码


正数的补码 $$=$$ 原码 负数的补码 = 反码末位 $$+1$$（要考虑进位）

因为需要表示负数， 所以我们就需要有一个位是特殊的， 所以我们让最高位有另外的含义

我们同样定义一个向量 ：  $$\vec{x} = [x_{w -1}, x_{w - 2}, \ldots, x_0] \quad x_i \in \{0, 1\}$$ 

这个向量对应这一个唯一的数 ： $$X = -x_{w - 1} 2^{w - 1} + \sum\limits_{i = 1}^{w - 2} x_i 2^i$$

同理：这个函数也是双射的，一个数对应一个向量， 一个向量也对应着一个数

对于一个有 $$w$$ 位的补码编码数 : 

 最大能表示的正整数为 $$T_{max} = 2^{w - 1} - 1$$ ， 最小能表示的负整数为 $$T_{min} = -2^{w - 1}$$

> 由  $$X$$ 的补码快速求出 $$-X$$ 的方法
> 
> 把每一位按位取反之后, 在在末尾加上 $$1$$ 考虑进位



**关于补码需要注意的地方**

1. 补码的范围是不对称的：$$|T_{min}| = |T_{max}| + 1$$ ，之所以会有这样的不对称性，是因为一半的位模式（符号位设置为 $$1$$ 的数）表示负数，而另一半（符号位设置为 $$0$$ 的数）表示非负数。因为 $0$ 是非负数，也就意味着能表示的整数比负数少一个。
2.  最大的无符号数值刚好比补码的最大值的两倍大一点 $$U_{max} = 2\times T_{max} + 1$$


#### 变形补码

为便于判断运算结果是否溢出，还采用一种双符号位的补码表示，称为变形补码，也称模 $$4$$ 补码。在双符号位中，左符表示真正的符号位，右符用于判断“溢出”。 即数字表示位 $$00, 123456$$

加法的补码溢出条件: 

对于两个数 $$x, y$$ ,  $$T_{min} \le x,y \le T_{max}$$ , $$x + y = s$$ 发生溢出当且仅当 $$x > 0, y > 0$$ 但是 $$s \le 0$$ 的时候发生正溢出， 当且仅当 $$x < 0, y < 0$$ 但是 $$s \ge 0$$ 的时候发生了负溢出


### 移码

补码的基础上将符号位(最高位)取反。注意：**移码只能用于表示整数** (**移码之间进行大小的比较非常方便, 可以直接从高位依次对比**)

移码的 $$0$$ 表示法唯一(从补码继承而来) , 权威 $$0$$ 时最小值为 $$- 2^{n}$$ [对应补码 $$10000\ldots$$] , 全为 $$1$$ 的时候最大值为 $$2^{n} - 1$$ [对应补码 $$011111\ldots$$]